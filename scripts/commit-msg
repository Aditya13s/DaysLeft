#!/bin/bash

# commit-msg - Git hook to validate commit message format
# To install: cp scripts/commit-msg .git/hooks/ && chmod +x .git/hooks/commit-msg

commit_regex='^(feat|fix|docs|style|refactor|test|chore|ci)(\(.+\))?(!)?: .{1,50}'

error_msg="Aborting commit. Your commit message is invalid.

Valid format: <type>[optional scope]: <description>

Types:
  feat     - new feature
  fix      - bug fix
  docs     - documentation changes
  style    - formatting, missing semi colons, etc
  refactor - code change that neither fixes a bug nor adds a feature
  test     - adding missing tests
  chore    - maintain, dependencies, etc
  ci       - changes to CI configuration files

Examples:
  feat: add user authentication
  fix: resolve app crash on startup
  feat(ui): add dark mode support
  feat!: redesign user interface (breaking change)
  docs: update README with installation instructions"

if ! grep -qE "$commit_regex" "$1"; then
    echo "$error_msg" >&2
    exit 1
fi